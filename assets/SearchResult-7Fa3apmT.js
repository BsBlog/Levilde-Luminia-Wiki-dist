import{f as K,u as N,g as X,h as Z,j as ee,t as le,i as se,k as R,l as g,m as e,n as ae,p as te,s as re,R as $,q as ie,v as Ee,x as ue,y as oe,z as ne,A as T,B as I,C as ce,D as de,E as Ae,F as ve,L as he,G as Be,H as me,I as ye,J as U,K as pe,M as f}from"./app-C_sArmFI.js";const De=["/","/en-US/","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Apple%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/MAC%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Windows%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/iOS%20%E8%AE%BE%E5%A4%87.html","/%E5%BC%80%E5%A7%8B/%E5%8F%8D%E9%A6%88%E4%B8%8E%E5%AA%92%E4%BD%93%E6%94%AF%E6%8F%B4.html","/%E5%BC%80%E5%A7%8B/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html","/%E5%BC%80%E5%A7%8B/%E6%A6%82%E8%BF%B0.html","/en-US/Get-Started/introduction.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E5%AF%B9%E7%8E%B0%E4%BB%A3%E5%A5%B4%E5%BD%B9%E5%88%B6%E5%92%8C%E7%AB%A5%E5%B7%A5%E5%88%B6%E7%9A%84%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E8%B4%BF%E8%B5%82%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/%E9%80%92%E4%BA%A4%20DMCA%20%E5%88%A0%E9%99%A4%E9%80%9A%E7%9F%A5%E6%8C%87%E5%8D%97.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%8D%8F%E8%B0%83%E6%BC%8F%E6%B4%9E%E6%8A%AB%E9%9C%B2.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.html","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%AC%A1%E7%BA%A7%E5%A4%84%E7%90%86%E8%80%85.html","/404.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/","/%E5%BC%80%E5%A7%8B/","/en-US/Get-Started/","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/"],Fe="SLIMSEARCH_QUERY_HISTORY",m=U(Fe,[]),ge=()=>{const{queryHistoryCount:t}=f;return{enabled:t>0,queryHistories:m,addQueryHistory:u=>{m.value=Array.from(new Set([u,...m.value.slice(0,t-1)]))},removeQueryHistory:u=>{m.value=[...m.value.slice(0,u),...m.value.slice(u+1)]}}},w=t=>De[t.id]+("anchor"in t?`#${t.anchor}`:""),fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:M}=f,y=U(fe,[]),Le=()=>({enabled:M>0,resultHistories:y,addResultHistory:E=>{{const u={link:w(E),display:E.display};"header"in E&&(u.header=E.header),y.value=[u,...y.value.slice(0,M-1)]}},removeResultHistory:E=>{y.value=[...y.value.slice(0,E),...y.value.slice(E+1)]}}),Ce=t=>{const{page:E,routeLocale:u}=ce(),L=de(),r=R(0),p=g(()=>r.value>0),c=Ae([]);return ve(()=>{const{search:C,terminate:v}=he(),D=me(h=>{const{resultsFilter:H=a=>a,querySplitter:B,suggestionsFilter:Q,...i}=L.value;h?(r.value+=1,C(h,u.value,i).then(a=>H(a,h,u.value,E.value)).then(a=>{r.value-=1,c.value=a}).catch(a=>{console.warn(a),r.value-=1,r.value||(c.value=[])})):c.value=[]},f.searchDelay-f.suggestDelay,{maxWait:5e3});Be([t,u],([h])=>D(h.join(" "))),ye(()=>{v()})}),{isSearching:p,results:c}};var Se=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:E}){const u=N(),L=X(),r=Z(ee),{addQueryHistory:p,queryHistories:c,removeQueryHistory:C}=ge(),{resultHistories:v,addResultHistory:D,removeResultHistory:h}=Le(),H=le(t,"queries"),{results:B,isSearching:Q}=Ce(H),i=se({isQuery:!0,index:0}),a=R(0),d=R(0),b=g(()=>c.value.length>0||v.value.length>0),S=g(()=>B.value.length>0),k=g(()=>B.value[a.value]||null),j=()=>{const{isQuery:l,index:s}=i;s===0?(i.isQuery=!l,i.index=l?v.value.length-1:c.value.length-1):i.index=s-1},O=()=>{const{isQuery:l,index:s}=i;s===(l?c.value.length-1:v.value.length-1)?(i.isQuery=!l,i.index=0):i.index=s+1},_=()=>{a.value=a.value>0?a.value-1:B.value.length-1,d.value=k.value.contents.length-1},G=()=>{a.value=a.value<B.value.length-1?a.value+1:0,d.value=0},P=()=>{d.value<k.value.contents.length-1?d.value+=1:G()},V=()=>{d.value>0?d.value-=1:_()},x=l=>l.map(s=>pe(s)?s:e(s[0],s[1])),Y=l=>{if(l.type==="customField"){const s=oe[l.index]||"$content",[A,o=""]=ne(s)?s[L.value].split("$content"):s.split("$content");return l.display.map(n=>e("div",x([A,...n,o])))}return l.display.map(s=>e("div",x(s)))},F=()=>{a.value=0,d.value=0,E("updateQuery",""),E("close")},W=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},c.value.map((l,s)=>{const A=i.isQuery&&i.index===s;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A,onClick:()=>{E("updateQuery",l)}},e("div",[e(T,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},l),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),C(s)}})]))}))])),z=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((l,s)=>{const A=!i.isQuery&&i.index===s;return e("li",{class:["slimsearch-record-matches",{active:A}],role:"option","aria-selected":A},e($,{to:l.link,onClick:()=>{F()}},()=>[e(T,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[l.header?e("div",{class:"slimsearch-record-content-header"},l.header):null,e("div",l.display.map(o=>x(o)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),h(s)}})]))}))]));return ae("keydown",l=>{if(t.isFocusing){if(S.value){if(l.key==="ArrowUp")V();else if(l.key==="ArrowDown")P();else if(l.key==="Enter"){const s=k.value.contents[d.value];p(t.queries.join(" ")),D(s),u.push(w(s)),F()}}else if(l.key==="ArrowUp")j();else if(l.key==="ArrowDown")O();else if(l.key==="Enter"){const{index:s}=i;i.isQuery?(l.preventDefault(),E("updateQuery",c.value[s])):(u.push(v.value[s].link),F())}}}),te([a,d],()=>{var l;(l=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||l.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:t.queries.length?!S.value:!b.value}]},t.queries.length?Q.value?e(re,{hint:r.value.searching}):S.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},B.value.map(({title:l,contents:s},A)=>{const o=a.value===A;return e("div",{class:["slimsearch-record",{active:o}],role:"group","aria-selected":o},[e("div",{class:"slimsearch-record-title"},l||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((n,J)=>{const q=o&&d.value===J;return e("li",{class:["slimsearch-record-matches",{active:q}],role:"option","aria-selected":q},e($,{to:w(n),onClick:()=>{p(t.queries.join(" ")),D(n),F()}},()=>[n.type==="text"?null:e(n.type==="title"?ie:n.type==="heading"?Ee:ue,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[n.type==="text"&&n.header?e("div",{class:"slimsearch-record-content-header"},n.header):null,e("div",Y(n))])]))}))])})):r.value.emptyResult:b.value?[W(),z()]:r.value.emptyHistory)}});export{Se as default};
