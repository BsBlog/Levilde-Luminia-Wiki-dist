import{f as $,u as j,g as M,h as O,j as _,t as V,i as G,k as C,l as F,m as t,n as Y,p as z,s as P,R as W,q as J,v as K,x as N,y as X,z as Z,A as ee,B as Ee,C as te,D as ae,L as le,E as se,F as ue,G as ie,H as b,I as re,J as p}from"./app-3PUEXd9q.js";const ne=["/","/Front-Test/","/en-US/","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Apple%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/MAC%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Windows%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/iOS%20%E8%AE%BE%E5%A4%87.html","/%E5%BC%80%E5%A7%8B/%E5%8F%8D%E9%A6%88%E4%B8%8E%E5%AA%92%E4%BD%93%E6%94%AF%E6%8F%B4.html","/%E5%BC%80%E5%A7%8B/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html","/%E5%BC%80%E5%A7%8B/%E6%A6%82%E8%BF%B0.html","/en-US/Get-Started/introduction.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E5%AF%B9%E7%8E%B0%E4%BB%A3%E5%A5%B4%E5%BD%B9%E5%88%B6%E5%92%8C%E7%AB%A5%E5%B7%A5%E5%88%B6%E7%9A%84%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E8%B4%BF%E8%B5%82%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/%E9%80%92%E4%BA%A4%20DMCA%20%E5%88%A0%E9%99%A4%E9%80%9A%E7%9F%A5%E6%8C%87%E5%8D%97.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%8D%8F%E8%B0%83%E6%BC%8F%E6%B4%9E%E6%8A%AB%E9%9C%B2.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.html","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%AC%A1%E7%BA%A7%E5%A4%84%E7%90%86%E8%80%85.html","/404.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/","/%E5%BC%80%E5%A7%8B/","/en-US/Get-Started/","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/"],Ae="SLIMSEARCH_QUERY_HISTORY",h=b(Ae,[]),oe=()=>{const{queryHistoryCount:e}=p;return{enabled:e>0,queryHistories:h,addQueryHistory:A=>{},removeQueryHistory:A=>{h.value=[...h.value.slice(0,A),...h.value.slice(A+1)]}}},w=e=>ne[e.id]+("anchor"in e?`#${e.anchor}`:""),ce="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:Be}=p,D=b(ce,[]),ve=()=>({enabled:Be>0,resultHistories:D,addResultHistory:n=>{},removeResultHistory:n=>{D.value=[...D.value.slice(0,n),...D.value.slice(n+1)]}}),de=e=>{const{page:n,routeLocale:A}=ee(),y=Ee(),i=C(0),m=F(()=>i.value>0),B=te([]);return ae(()=>{const{search:L,terminate:g}=le(),o=ue(c=>{const{resultsFilter:l=u=>u,querySplitter:s,suggestionsFilter:f,...v}=y.value;c?(i.value+=1,L(c,A.value,v).then(u=>l(u,c,A.value,n.value)).then(u=>{i.value-=1,B.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(B.value=[])})):B.value=[]},p.searchDelay-p.suggestDelay,{maxWait:5e3});se([e,A],([c])=>o(c.join(" "))),ie(()=>{g()})}),{isSearching:m,results:B}};var he=$({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(e,{emit:n}){const A=j(),y=M(),i=O(_),{addQueryHistory:m}=oe(),{enabled:B}=ve(),L=B,g=V(e,"queries"),{results:o,isSearching:c}=de(g);G({isQuery:!0,index:0});const l=C(0),s=C(0),f=F(()=>L),v=F(()=>o.value.length>0),u=F(()=>o.value[l.value]||null),k=()=>{l.value=l.value>0?l.value-1:o.value.length-1,s.value=u.value.contents.length-1},x=()=>{l.value=l.value<o.value.length-1?l.value+1:0,s.value=0},I=()=>{s.value<u.value.contents.length-1?s.value+=1:x()},Q=()=>{s.value>0?s.value-=1:k()},R=E=>E.map(a=>re(a)?a:t(a[0],a[1])),T=E=>{if(E.type==="customField"){const a=X[E.index]||"$content",[S,d=""]=Z(a)?a[y.value].split("$content"):a.split("$content");return E.display.map(r=>t("div",R([S,...r,d])))}return E.display.map(a=>t("div",R(a)))},H=()=>{l.value=0,s.value=0,n("updateQuery",""),n("close")};return Y("keydown",E=>{if(e.isFocusing&&v.value){if(E.key==="ArrowUp")Q();else if(E.key==="ArrowDown")I();else if(E.key==="Enter"){const a=u.value.contents[s.value];m(e.queries.join(" ")),A.push(w(a)),H()}}}),z([l,s],()=>{var E;(E=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||E.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:e.queries.length?!v.value:!f.value}]},e.queries.length?c.value?t(P,{hint:i.value.searching}):v.value?t("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},o.value.map(({title:E,contents:a},S)=>{const d=l.value===S;return t("div",{class:["slimsearch-record",{active:d}],role:"group","aria-selected":d},[t("div",{class:"slimsearch-record-title"},E||i.value.defaultTitle),t("ul",{class:"slimsearch-record-contents"},a.map((r,U)=>{const q=d&&s.value===U;return t("li",{class:["slimsearch-record-matches",{active:q}],role:"option","aria-selected":q},t(W,{to:w(r),onClick:()=>{m(e.queries.join(" ")),H()}},()=>[r.type==="text"?null:t(r.type==="title"?J:r.type==="heading"?K:N,{class:"slimsearch-record-type"}),t("div",{class:"slimsearch-record-content"},[r.type==="text"&&r.header?t("div",{class:"slimsearch-record-content-header"},r.header):null,t("div",T(r))])]))}))])})):i.value.emptyResult:i.value.emptyResult)}});export{he as default};
