import{f as $,u as j,g as M,h as O,j as _,i as V,k as G,l as E,s as Y,R as z,m as P,n as W,p as K,q as C,t as F,v as N,x as J,y as X,z as Z,A as ee,L as Ee,B as te,C as ae,D as le,E as se,F as ue,G as p,H as ie,I as b}from"./app-CUEShduA.js";const re=["/","/Front-Test/","/en-US/","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Android%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Apple%20TV%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/MAC%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/Windows%20%E8%AE%BE%E5%A4%87.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/iOS%20%E8%AE%BE%E5%A4%87.html","/%E5%BC%80%E5%A7%8B/%E5%8F%8D%E9%A6%88%E4%B8%8E%E5%AA%92%E4%BD%93%E6%94%AF%E6%8F%B4.html","/%E5%BC%80%E5%A7%8B/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html","/%E5%BC%80%E5%A7%8B/%E6%A6%82%E8%BF%B0.html","/en-US/Get-Started/introduction.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E5%AF%B9%E7%8E%B0%E4%BB%A3%E5%A5%B4%E5%BD%B9%E5%88%B6%E5%92%8C%E7%AB%A5%E5%B7%A5%E5%88%B6%E7%9A%84%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E5%8F%8D%E8%B4%BF%E8%B5%82%E5%A3%B0%E6%98%8E.html","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/%E9%80%92%E4%BA%A4%20DMCA%20%E5%88%A0%E9%99%A4%E9%80%9A%E7%9F%A5%E6%8C%87%E5%8D%97.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%8D%8F%E8%B0%83%E6%BC%8F%E6%B4%9E%E6%8A%AB%E9%9C%B2.html","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5.html","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%AC%A1%E7%BA%A7%E5%A4%84%E7%90%86%E8%80%85.html","/404.html","/%E4%BD%BF%E7%94%A8%E4%B8%8E%E6%92%AD%E6%94%BE/","/%E5%BC%80%E5%A7%8B/","/en-US/Get-Started/","/%E6%94%BF%E7%AD%96/Levilde%20Luminia%20%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%86%85%E5%AE%B9%E5%88%A0%E9%99%A4%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E5%AE%89%E5%85%A8%E6%94%BF%E7%AD%96/","/%E6%94%BF%E7%AD%96/%E9%9A%90%E7%A7%81%E6%94%BF%E7%AD%96/"],ne="SLIMSEARCH_QUERY_HISTORY",h=b(ne,[]),Ae=()=>{const{queryHistoryCount:e}=p;return{enabled:e>0,queryHistories:h,addQueryHistory:A=>{},removeQueryHistory:A=>{h.value=[...h.value.slice(0,A),...h.value.slice(A+1)]}}},w=e=>re[e.id]+("anchor"in e?`#${e.anchor}`:""),oe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:ce}=p,D=b(oe,[]),Be=()=>({enabled:ce>0,resultHistories:D,addResultHistory:n=>{},removeResultHistory:n=>{D.value=[...D.value.slice(0,n),...D.value.slice(n+1)]}}),ve=e=>{const{page:n,routeLocale:A}=X(),y=Z(),i=C(0),m=F(()=>i.value>0),B=se([]);return ee(()=>{const{search:L,terminate:g}=Ee(),o=ue(c=>{const{resultsFilter:a=u=>u,querySplitter:s,suggestionsFilter:f,...v}=y.value;c?(i.value+=1,L(c,A.value,v).then(u=>a(u,c,A.value,n.value)).then(u=>{i.value-=1,B.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(B.value=[])})):B.value=[]},p.searchDelay-p.suggestDelay,{maxWait:5e3});te([e,A],([c])=>o(c.join(" "))),ae(()=>{g()})}),{isSearching:m,results:B}};var me=$({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(e,{emit:n}){const A=j(),y=M(),i=O(_),{addQueryHistory:m}=Ae(),{enabled:B}=Be(),L=B,g=ie(e,"queries"),{results:o,isSearching:c}=ve(g),a=C(0),s=C(0),f=F(()=>L),v=F(()=>o.value.length>0),u=F(()=>o.value[a.value]||null),k=()=>{a.value=a.value>0?a.value-1:o.value.length-1,s.value=u.value.contents.length-1},I=()=>{a.value=a.value<o.value.length-1?a.value+1:0,s.value=0},T=()=>{s.value<u.value.contents.length-1?s.value+=1:I()},x=()=>{s.value>0?s.value-=1:k()},R=l=>l.map(t=>le(t)?t:E(t[0],t[1])),Q=l=>{if(l.type==="customField"){const t=N[l.index]||"$content",[S,d=""]=J(t)?t[y.value].split("$content"):t.split("$content");return l.display.map(r=>E("div",R([S,...r,d])))}return l.display.map(t=>E("div",R(t)))},H=()=>{a.value=0,s.value=0,n("updateQuery",""),n("close")};return V("keydown",l=>{if(e.isFocusing&&v.value){if(l.key==="ArrowUp")x();else if(l.key==="ArrowDown")T();else if(l.key==="Enter"){const t=u.value.contents[s.value];m(e.queries.join(" ")),A.push(w(t)),H()}}}),G([a,s],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>E("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:e.queries.length?!v.value:!f.value}]},e.queries.length?c.value?E(Y,{hint:i.value.searching}):v.value?E("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},o.value.map(({title:l,contents:t},S)=>{const d=a.value===S;return E("div",{class:["slimsearch-record",{active:d}],role:"group","aria-selected":d},[E("div",{class:"slimsearch-record-title"},l||i.value.defaultTitle),E("ul",{class:"slimsearch-record-contents"},t.map((r,U)=>{const q=d&&s.value===U;return E("li",{class:["slimsearch-record-matches",{active:q}],role:"option","aria-selected":q},E(z,{to:w(r),onClick:()=>{m(e.queries.join(" ")),H()}},()=>[r.type==="text"?null:E(r.type==="title"?P:r.type==="heading"?W:K,{class:"slimsearch-record-type"}),E("div",{class:"slimsearch-record-content"},[r.type==="text"&&r.header?E("div",{class:"slimsearch-record-content-header"},r.header):null,E("div",Q(r))])]))}))])})):i.value.emptyResult:i.value.emptyResult)}});export{me as default};
